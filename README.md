
## –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π Ecowitt –Ω–∞ —Å–µ—Ä–≤–µ—Ä FROST

–ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä **FROST** —Å –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π –∏ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∫ –Ω–∏–º –¥–∞—Ç—á–∏–∫–æ–≤ **–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ (Raspberry Pi / Home Assistant)**.  
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º **OGC SensorThings API**.

---

## ‚öôÔ∏è –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–µ–Ω—Å–æ—Ä—ã
- –ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏ —Å–µ—Ä–∏–∏ **GW** –æ—Ç *Ecowitt*.
- –õ—é–±—ã–µ –¥–∞—Ç—á–∏–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ —Ä–µ–∂–∏–º **Custom Upload** ([–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è][1]).

---

## üñ•Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ |
|------------|-------------|
| **–ü–æ—Ä—Ç** | –û—Ç–∫—Ä—ã—Ç—ã–π 8080 / 8081 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
| **IP-–∞–¥—Ä–µ—Å** | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–Ω–µ—à–Ω–∏–π |
| **–î–æ—Å—Ç—É–ø** | SSH —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞** | –ü—Ä—è–º–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏: `Things`, `Sensors`, `Observations`, `Locations` |

### –°–µ—Ç—å
- –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç.

---

## üíª –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
- Ubuntu 20.04 LTS –∏–ª–∏ –Ω–æ–≤–µ–µ  
- Debian 10 –∏–ª–∏ –Ω–æ–≤–µ–µ  

**–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ:**
- Python ‚â• 3.8  
- Flask ‚â• 3.0 ‚Äî REST API-–ø—Ä–∏—ë–º–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Ecowitt ([2])  
- Requests ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ ([3])  
- Gunicorn ‚Äî WSGI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ([4])  

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- WSL + Total Commander ‚Äî –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É  
- –õ–∏–±–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª / PowerShell  

**–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- *WS View Plus* ‚Äî –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º ([5])

---

## üß© –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ FROST

–°–µ—Ä–≤–µ—Ä **FROST** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **OGC SensorThings API**, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è POST-–∑–∞–ø—Ä–æ—Å—ã –ø–æ REST API.  
–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π HTTP-—Å–µ—Ä–≤–∏—Å (Flask), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç:
1. –ü—Ä–∏–Ω–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π Ecowitt.  
2. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∏—Ö –≤ JSON-—Ñ–æ—Ä–º–∞—Ç, –ø–æ–Ω—è—Ç–Ω—ã–π –¥–ª—è FROST.  

---

### 1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –ø–æ–º–æ—â—å—é SSH (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç–∫–µ FROST).  
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `screen` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

```bash
sudo apt update
sudo apt install python3 python3-pip -y
```
–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
python3 --version
pip3 --version
```
–ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:
```bash
Python 3.10.1
pip 23.0.1
```
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:
```bash
pip3 install flask requests gunicorn
```
### 2Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
mkdir ~/ecowitt_receiver
cd ~/ecowitt_receiver
python3 -m venv venv
source venv/bin/activate
```
–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è:

```bash
(venv)
```
### 3Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
nano app.py
```

```bash
from flask import Flask, request, jsonify
from datetime import timezone
import requests
import datetime
import logging
import os

app = Flask(__name__)

# === –ù–ê–°–¢–†–û–ô–ö–ò ===
FROST_URL = "http://90.156.134.128:8080/FROST-Server/v1.1/Observations"

# Ecowitt ‚Üí FROST Datastream IDs
DATASTREAM_MAP = {
    "feelslike": 6,  # –û—â—É—â–∞–µ–º–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–∑–¥—É—Ö–∞
    "humidity": 7,   # –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞
}

# === –õ–û–ì–ò ===
os.makedirs("logs", exist_ok=True)
logging.basicConfig(
    filename="logs/ecowitt_receiver.log",
    level=logging.INFO,
    format="%(asctime)s [%(levelname)s] %(message)s"
)

@app.route('/ecowitt_upload', methods=['POST'])
def ecowitt_upload():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏ Ecowitt."""
    data = request.form.to_dict()
    time_iso = datetime.datetime.now(datetime.timezone.utc).replace(microsecond=0).isoformat()
    results = []

    for key, datastream_id in DATASTREAM_MAP.items():
        if key in data:
            try:
                value = float(data[key])
                payload = {
                    "Datastream": {"@iot.id": datastream_id},
                    "result": value,
                    "phenomenonTime": time_iso
                }
                r = requests.post(FROST_URL, json=payload, timeout=5)
                results.append({key: r.status_code})
            except Exception as e:
                results.append({key: f"error {e}"})
        else:
            results.append({key: "missing"})

    return jsonify({"status": "ok", "results": results}), 200

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8081)
```
–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª (Ctrl+O, –∑–∞—Ç–µ–º Enter) –∏ –≤—ã–π–¥–∏—Ç–µ (Ctrl+X).

### 4Ô∏è‚É£ –ó–∞–ø—É—Å–∫ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
python3 app.py
```
–ß—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∞–∫—Ç–∏–≤–Ω—ã–º:

1. –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ screen;
2. –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å–µ—Å—Å–∏—é: Ctrl+A, –∑–∞—Ç–µ–º Ctrl+D.

### 5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Flask

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—Ä –≤–∫–ª—é—á–µ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏ SSH:
```bash
curl -X POST -d "feelslike=12.3&humidity=80" http://localhost:8081/ecowitt_upload
```
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```bash
{"results":[{"feelslike":201},{"humidity":201}],"status":"ok"}
```
–ö–æ–¥ 201 –æ–∑–Ω–∞—á–∞–µ—Ç —É—Å–ø–µ—à–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä FROST.

---


### üå¶Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —Å–æ —à–ª—é–∑–∞ Ecowitt

–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WS View Plus.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ:
More ‚Üí Weather Services ‚Üí Customized.

–í–≤–µ–¥–∏—Ç–µ:

IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

–ü—É—Ç—å: /ecowitt_upload

–ü–æ—Ä—Ç: 8081

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ FROST
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```bash
http://<ip-–∞–¥—Ä–µ—Å>:8080/FROST-Server/v1.1/Observations
```
–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å–≤–µ–∂–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –æ—Ç –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π.

